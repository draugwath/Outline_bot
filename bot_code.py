import paramiko
import telebot

from telebot import types

bot = telebot.TeleBot('xxx')

command = "ssh_script.ssh"

host = "vps_ip"
username = "vps_username"
password = "pwd"


def generate():
    client = paramiko.client.SSHClient()
    client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    client.connect(host, username=username, password=password)
    _stdin, _stdout, _stderr = client.exec_command("ssh_script.sh")
    return(_stdout.read().decode())
    client.close()

@bot.message_handler(commands=['start'])
def start(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    item1 = types.KeyboardButton('‚ÑπÔ∏è–û –ø—Ä–æ–µ–∫—Ç–µ')
    item2 = types.KeyboardButton('üí∏ –ü–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É')
    item3 = types.KeyboardButton('üõ°Ô∏è –ê —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?')
    item4 = types.KeyboardButton('üîë –•–æ—á—É –∫–ª—é—á–∏–∫!')

    markup.add(item1, item2, item3, item4)

    bot.send_message(message.chat.id, '–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ—Ç –±–æ—Ç –≤—ã–¥–∞–µ—Ç –∫–ª—é—á–∏ –¥–ª—è shadowsocks-—Å–µ—Ä–≤–∏—Å–∞ Outline, –∫–æ—Ç–æ—Ä—ã–π –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –º–æ–µ–º —Å–µ—Ä–≤–µ—Ä–µ.' .format(message.from_user), reply_markup=markup)

@bot.message_handler(content_types=['text'])
def bot_message(message):
    if message.chat.type == 'private':
        if message.text == '‚ÑπÔ∏è–û –ø—Ä–æ–µ–∫—Ç–µ':
            bot.send_message(message.chat.id, '–≠—Ç–æ –º–∞–ª–µ–Ω—å–∫–∏–π Outline-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –¥—Ä—É–∑–µ–π. Outline –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ iOS –∏ Android. –ï—Å—Ç—å –≤–µ—Ä—Å–∏–∏ –∏ –¥–ª—è –ü–ö. –°–µ—Ä–≤–µ—Ä –¥–æ–≤–æ–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞ –Ω–µ–º —Å–∏–¥–∏—Ç –Ω–µ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —é–∑–µ—Ä–æ–≤. –§–∏–∑–∏—á–µ—Å–∫–∏ —Å–µ—Ä–≤–µ—Ä —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –õ–∞—Ç–≤–∏–∏, –≥–¥–µ –Ω–µ –æ—á–µ–Ω—å –ø—Ä–∏–Ω—è—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å ¬´–Ω–µ—É–¥–æ–±–Ω—ã–µ¬ª —Ä–µ—Å—É—Ä—Å—ã. –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–¥–µ—Ç ‚Äî –ø–∏—à–∏—Ç–µ –ø—Ä—è–º–æ –º–Ω–µ. –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ—Ä–µ—à–∞—Ç—å.')
        elif message.text == 'üí∏ –ü–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É':
            bot.send_message(message.chat.id, '–≠—Ç–æ –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç, –ø–æ—ç—Ç–æ–º—É —è –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é –¥–æ–Ω–∞—Ç—ã. –ï—Å–ª–∏ –≤–∞–º —Ö–æ—á–µ—Ç—Å—è –º–µ–Ω—è –æ—Ç–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–æ–Ω–∞—Ç –ª—é–±–æ–π –ø—Ä–∞–≤–æ–∑–∞—â–∏—Ç–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –≤–∞—à–µ–º—É –≤–∫—É—Å—É ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ê–≥–æ—Ä–µ, –û–í–î-–ò–Ω—Ñ–æ –∏–ª–∏ –ù–∞—Å–∏–ª–∏—é.–Ω–µ—Ç. –ï—â–µ –∫—Ä—É—Ç–æ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ú–µ–¥–∏–∞–∑–æ–Ω—É –∏–ª–∏ –ú–µ–¥—É–∑—É.')
        elif message.text == 'üõ°Ô∏è –ê —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?':
            bot.send_message(message.chat.id, '–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –¥–∞. –¢—Ä–∞—Ñ–∏–∫ —à–∏—Ñ—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–ª—é—á–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –∫–∞–∫ —Ä–∞–∑ –∏ –≤—ã–¥–∞–µ—Ç —ç—Ç–æ—Ç –±–æ—Ç. –ï—Å–ª–∏ –∫–ª—é—á –ø–æ–ø–∞–¥–µ—Ç –∫ —Ç–æ–≤–∞—Ä–∏—â—É –º–∞–π–æ—Ä—É, –æ–Ω —Å–º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –≤–∞—à —Ç—Ä–∞—Ñ–∏–∫. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –ø—Ä–æ–≤–∞–π–¥–µ—Ä –º–æ–∂–µ—Ç –∑–∞–º–µ—Ç–∏—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º —Ç—Ä–∞—Ñ–∏–∫–∞, —É—Ö–æ–¥—è—â–∏–π –Ω–∞ –æ–¥–∏–Ω –∞–¥—Ä–µ—Å, –∏ –∑–∞–±–ª–æ—á–∏—Ç—å –º–æ–π —Å–µ—Ä–≤–µ—Ä, –Ω–æ —ç—Ç–æ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ: –æ–Ω —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π. –ò –¥–∞, –≤—Å–µ —ç—Ç–æ –Ω–µ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –º–æ–∂–Ω–æ –∫–∞—á–∞—Ç—å –¥–µ—Ç—Å–∫—É—é –ø–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏—é. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ–≥–æ.')
        elif message.text == 'üîë –•–æ—á—É –∫–ª—é—á–∏–∫!':
            bot.send_message(message.chat.id, text = str(generate()))
bot.delete_webhook()
bot.polling()
